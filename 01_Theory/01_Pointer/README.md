# 포인터(Pointer)

사용하는 모든 변수는 메모리의 특정 위치에 저장되는데 그 위치를 나타내는 메모리 주소를 `포인터`라고 한다. 

포인터 변수 P가 어떤 변수 A의 주소를 저장하고 있다는 것은, 포인터 변수 P가 변수 A의 위치(메모리 주소)를 가리키고 있다는 의미이다.

```mermaid
flowchart LR
    *ptr ---> &i
```

포인터는 다음과 같은 형식으로 선언한다:

```c++
int *ptr = &i
```

1. 포인터 자체의 자료형이 아닌 포인터에 저장할 주소에 있는 일반 변수의 자료형이다.
2. 일반 변수 이름과 구별되도록 앞에 *를 붙여 포인터임을 나타낸다.

C언어에서 사용하는 포인터 관련 연산자에는 `주소 연산자(&)`와 `참조 연산자(*)`가 있다.

## 주소 연산자(&)
주소 연산자 &는 변수의 주소를 얻는 데에 사용한다. 즉, 변수 앞에 주소 연산자를 사용하면 그 변수의 주소를 사용할 수 있다. 

이때 주소 연산자를 사용할 변수와 포인터는 같은 자료형으로 선언되어 있어야 한다. 

```c++
int i = 10;

// int *ptr = &i;
int *ptr;
ptr = &i;
```

`ptr=&i;`를 실행하게 되면 포인터 `ptr`에 변수 `i`의 주소가 저장되어 포인터 `ptr`은 변수 `i`를 액세스할 수 있는 상태가 된다.


## 참조 연산자(*)

다른 변수의 주소가 저장된 포인터에 참조 연산자 *를 사용하면 지정된 주소 영역(참조 영역) 또는 저장된 주소 영역의 값(참조값)을 액세스할 수 있다.

```c++
int i, j;
int *ptr;
ptr = &i;   // (1)

*ptr = 10;  // (2)
j = *ptr;   // (3)
```

- (1) 주소 연산자를 사용하여 변수 i의 주소를 포인터 ptr에 할당한다. 포인터 ptr은 변수 i를 가리킨다.
- (2) 참조 연산자를 사용하여 포인터 ptr이 가리키는 영역에 값 10을 지정한다. 따라서 변수 i에 10이 저장된다.
- (3) 다시 참조 연산자를 사용하여 ptr이 가리키는 영역의 값을 변수 j에 지정한다. 따라서 ptr이 가리키는 변수 i의 값인 10을 변수 j에 저장한다.


## 포인터 초기화

포인터에 주소를 지정하렬면 다음과 같이 주소를 간접적으로 지정한다:

1. 주소 연산자를 사용하여 변수 주소를 지정한다.
```c++
int i;
int *ptr = &i;
```

2. 동적 메모리를 할당하고 그 시작 주소를 포인터값으로 지정한다.
> 동적 메모리를 할당하는 `malloc()` 함수를 사용하여 문자형(char) 공간 100개를 할당하고, 그 시작 주소를 포인터 ptr에 지정
```c++
char *ptr = (char *)malloc(100);
```

3. 문자형 포인터에 문자열의 시작 주소를 지정한다.
> 문자열 자료형은 일반 자료형과 다르게 문자열 지정만으로 그 시작 주소를 전달할 수 있다. 
> "korea" 문자열이 포인터 ptr에 저장되는 것이 아닌 "korea" 문자열이 저장된 위치의 시작 주소가 포인터 ptr에 저장된다.
```c++
char *ptr = "korea";
```

4. 배열 이름을 이용하여 배열 시작 주소를 지정한다.
> 배열 이름은 문자열과 마찬가지로 그 시작 주소를 전달할 수 있다.
> 포인터 변수 ptr은 문자형(char) 요소를 100개 가진 배열 A의 시작 주소를 저장한다.
```c++
char A[100];
char *ptr = A;
```

5. 배열의 첫 번째 요소의 주소를 이용하여 배열 시작 주소를 지정한다.
> 배열의 시작은 첫 번째 요소, 즉 0번 인덱스의 배열 요소를 말한다.
> 그러므로 0번 배열 요소의 주소를 사용하여 배열의 시작 주소를 포인터에 전달할 수 있다.
> 인덱스로 표시하는 배열의 각 요소는 그 자체로는 주소를 전달할 수 없기 때문에 주소 연산자 &를 사용해야 한다.
```c++
char A[100];
char *ptr = &A[0];
```
 
## 이중 포인터

포인터의 포인터(이중 포인터)는 포인터를 가리키고 있는 포인터, 즉 일반 변수의 주소가 아닌 포인터의 주소를 가지고 있는 포인터를 의미한다.

```c++
char **ptr;
```

예를 들어, 다음과 같이 선언하면 ptr은 char형 포인터를 가리키는 포인터가 된다.